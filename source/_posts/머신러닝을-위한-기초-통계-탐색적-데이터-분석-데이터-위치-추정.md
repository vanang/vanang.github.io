---
title: '머신러닝을 위한 기초 통계: 탐색적 데이터 분석 - 데이터 위치 추정'
date: 2019-02-27 11:03:50
tags:
---

# 머신러닝을 위한 기초 통계 : 탐색적 데이터 분석 1 - 데이터의 위치 추정

처음 머신러닝을 책으로 공부하고, 무턱대고 개발하다가 좌절한 경험과 고민끝에 우선 필요한 것이 '탐색적 데이터 분석'이라는 분야였습니다.  통계는 고등학교 시절 거들떠 보지도 않았던 기억에 매우 낯설게만 느껴지지만, 한걸음씩 나아가고자 기초 통계 공부를 시작하였습니다.

개인적으로 수학을 잘 못하였고, 지금도 잘 못하고, 공부한다고 특별히 더 잘 해 질것 같지 않아서, 가급적 수학 기호등은 배제하고, 개념에만 집중하면서 자료를 남기려고 합니다.

# 탐색적 데이터 분석(Exploratory Data Analysis, EDA)이란

탐색적 데이터 분석은 통계학의 일부로, 1977년 미국의 '존 투키'에 의해 시작된 분야라고 합니다.  기존 통계학과 다른 점은 통계 이론들을 이용해서 **데이터를 사람이 인지할 수 있도록 시각화 기법등을 동원해 데이터에 내포된 유의미한 정보를 찾아가는 과정** 이라고 합니다.  

실제로 캐글과 같은 머신러닝 경쟁 플랫폼에서는 각 문제의 공개 커널들마다 EDA 태깅이 달린 커널들이 많이 있습니다.  머신을 제대로 학습시키기 위해서는 데이터를 가공(Engineering)과 그에 앞서 데이터에서 유의미한 정보를 찾기 위한 과정이 반드시 수반되어야 하기 때문이 아닌가 싶습니다.

그 중 가장 먼저 시작하는 것이 아마도 데이터의 위치 추정일 것입니다.  위치 추정의 방법과 의미에 대해서 알아보고자 합니다.

# 데이터의 유형

데이터는 크게 수치형 데이터와 범주형 데이터로 나누어 집니다. 시계열 데이터 등도 있지만, 여기서는 테이블 형식으로 표현할 수 있는 데이터만 분류하였습니다.

아래의 데이터 유형을 알아야 하는 이유는 데이터 유형에 따라 분석시 분석 방법이나 시각화 방법이 달라질 수 있기 때문입니다.

| 데이터 타입 | 설명 | 예제 | 유의어 및 유의개념 |
|-----------|-----|-----|----------------|
| 연속형 데이터 (수치형) | 실수형 값 | 풍속, 지속시간 등 | 구간형, 실수형, 수치형 데이터 |
|이상 데이터 (수치형) | 정수형 값 | 사건의 발생 빈도, 물건의 갯수 등 | 정수형, 횟수 데이터 |
| 범주형 데이터 | 범위가 정해진 데이터 | 자동차 종류, 도시명 등 | 목록, 열거, 요인, 명목, 다항형 데이터 |
| 이진 데이터 | 범주 형의 특수한 케이스 0/1 또는 참/거짓의 값을 갖는 데이터 | 0,1 또는 참/거짓 | 이항, 논리, 불리언 데이터 |
| 순서형 데이터 | 범주형의 특수한 케이스로 범주내의 순서의 의미를 갖는 데이터 | 평점, 신용등급 등 | 정렬된 요인 데이터|

# 위치 추정

그럼 본격적으로 데이터의 위치 위치를 추정하는 방법에 대해서 살펴보겠습니다.

위치 추정은 1개 변수에 대한 '대표값'을 추정해서 값의 무게중심 (중심경향성)이 어디에 있는지 표현하는 **추정값**으로 보면 됩니다.  대표적인 추정값으로는
* 평균(average, mean), 가중평균(weighted average, weighted mean), 중간값(median, 50th percentile), 가중 중간값(weighted median), 절사평균(trimmed mean, truncated mean) 

등이 있습니다.

## 평균

평균은 많은 사람들이 이미 익히 알고 있기 때문에 구체적인 설명을 할 필요는 없을 것 같습니다.

다만, 특이값에 의해 평균이 대표값으로 제대로 데이터의 중심경향성을 표현하지 못할 수도 있습니다.  아래의 그림에서 재산 상위 1위가 포함회면 전체 국회의원의 재산이 2배 이상이 되어 데이터의 위치 추정시 왜곡시킬 수 있는 여지가 있습니다.
![19대 국회의원 재산](http://res.heraldm.com/content/image/2012/08/30/20120830000011_0.jpg)

평균이 특이값(outlier)에 민감하기 때문에, 이를 보완하기 위한 몇 가지 변형된 평균이 있습니다.

## 절사 평균

절사 평균은 데이터들을 크기순으로 정렬한 후, 양 극단의 특이값 일정 수를 제거한 뒤 평균을 취한 것입니다.  평균이 특이값으로 인해 제대로 대표하지 못하는 경우 사용하면 되겠습니다.  

올림픽 체조, 다이빙이나 피겨 스케이팅와 같이 최고/최저 점수를 제외한 나머지 심사위원의 평가 결과를 평균을 취하는 것이 좋은 예가 될것입니다.

## 가중 평균

특이값에 대한 영향뿐 아니라 데이터의 표본이 모집단과 상이한 경우 대표성을 제대로 표현하지 못하는 경우도 있습니다. 예를 들어, 정부 정책에 대한 선호도를 조사한다고 할때, 20대와 30대, 40대는 조사에 참여한 비율이 다를 수 밖에 없습니다.  그렇기 때문에, 비율을 고려하지 않고, 무작정 평균을 취하면 다수를 차지하는 나잇대가 대표값을 큰 영향을 줄 수 밖에 없습니다.

가중 평균을 이러한 점을 고려하여 평균을 취하기 전에 데이터마다 서로 다른 가중치를 적용하여 대표성이 왜곡되는 것을 보완하는 방법입니다.

# 중간값

중간값은 데이터를 정렬했을 때 중앙에 위치 하는 값으로, 데이터의 수가 짝수개인 경우 중간의 값 두 개의 평균이 중간값이 됩니다.  특이값에 대해 민감하지 않기 때문에, 평균보다 위치 추정에 더 유리하다고 볼 수 있을 것 같습니다.

여기서 생각해 볼 문제가 있습니다.  바로 **특이값**에 대한 취급입니다.  특이값은 대표성을 해칠 수 있기 때문에 위치 추정 시 고려해야하는 대상이지만, 머신 러닝으로 **이상 검출**과 같은 기능을 구현한다고 하면 바로 특이값이 분류/예측의 대상이 되기 때문입니다.  

또 한가지 생각해 볼 문제는 과연 어느 정도의 크기의 값부터 특이값으로 볼 것이냐 하는 것입니다.  많은 분들이 얘기하기를 "정해진 황금 법칙은 없다"라는 것이 중론이었습니다.  위의 국회의원 재산과 같이 명확한 특이값이 있는 반면에, 애매한 것들이 더 많지 않을까 생각해 봅니다.  

# 대표값의 강건성(Robustness)

앞에서 특이값이 대한 민감도를 언급했었는데, 이를 표현하는 용어가 강건성(Robustness)입니다.  대표값이 특이값에 대해 민감한 정도를 일컫는 말이고, 정리해보자면 평균보다는 절사 평균이 더 강건하고, 중간값이 더 강건하다고 볼 수 있을 것 같습니다.

# 마치며

머신 러닝 초보자로 또 통계의 초심자로 간단하게 데이터의 대표값을 추정하는 방법에 대해서 작성하였습니다.  정리해보면,
* 위치 추정에는 평균과 중간값이 주로 사용되고, 평균의 강건성을 보완할 수 있도록 절사 평균이나 가중 평균이 사용 될 수 있다.
* 평균보다 중간값이 강건한 위치 추정값이다.



